webpackJsonp([1],{"2jnm":function(t,e){},CcWh:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("7+uW"),n=i("Au9i"),a=i.n(n),r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var o=i("VU/8")({name:"App"},r,!1,function(t){i("sbcC")},null,null).exports,l=i("/ocq"),c=i("//Fk"),p=i.n(c),d=i("hLg7"),u=i.n(d),m=i("fzln"),f=i.n(m),h=(i("2jnm"),i("OCIE"),{data:function(){return{files:[],index:0,maxLength:9,maxSize:1024e4}},methods:{selectImgs:function(){var t=this,e=this.$refs.file.files;e.length>9&&alert(this.lang.dynamic_upload_tips);for(var i=[],s=function(s,n){var a={Id:t.index++,name:e[s].name,size:e[s].size,file:e[s]},r=new FileReader;r.onloadend=function(e){t.getBase64(e.target.result).then(function(e){t.$set(a,"src",e)})},a.size>t.maxSize?Toast(t.lang.dynamic_over_size):(r.readAsDataURL(e[s]),i.push(a),t.files.push(a))},n=0,a=e.length;n<a;n++)s(n);setTimeout(function(){t.$emit("getFiles",i)},300),this.files.splice(9)},getBase64:function(t){var e=new Image,i="";return e.src=t,new p.a(function(t,s){e.onload=function(){var s=document.createElement("canvas"),n=e.width,a=e.height,r=n/a,o=a,l=n;(n>1e3||a>1e3)&&(n>a?(l=1e3,o=1e3/r):(l=1e3*r,o=1e3)),s.width=l,s.height=o,s.getContext("2d").drawImage(e,0,0,l,o),i=s.toDataURL("image/jpeg",.5),t(i)}})},remove:function(t,e){var i=this;e.stopPropagation(),this.files.splice(t,1),setTimeout(function(){i.$emit("removeFiles",t)},300)},initPhotoSwipeFromDOM:function(t){for(var e=function(t){var e=function t(e,i){return e&&(i(e)?e:t(e.parentNode,i))}((t=t||window.event).target||t.srcElement,function(t,e){return t.tagName&&"FIGURE"===t.tagName.toUpperCase()});if(e){for(var s,n=e.parentNode,a=e.parentNode.childNodes,r=a.length,o=0,l=0;l<r;l++)if(1===a[l].nodeType){if(a[l]===e){s=o;break}o++}return s>=0&&i(s,n),!1}},i=function(t,e,i,s){var n,a,r=document.querySelectorAll(".pswp")[0];if(a=function(t){for(var e,i,s,n,a=t.childNodes,r=a.length,o=[],l=0;l<r-1;l++)if(1===(e=a[l]).nodeType){i=e.children[0];var c=new Image;c.src=i.getAttribute("href"),i.setAttribute("data-size",c.naturalWidth+"x"+c.naturalHeight),s=i.getAttribute("data-size").split("x"),n={src:i.getAttribute("href"),w:parseInt(s[0],10),h:parseInt(s[1],10)},e.children.length>1&&(n.title=e.children[1].innerHTML),i.children.length>0&&(n.msrc=i.children[0].getAttribute("src")),n.el=e,o.push(n)}return o}(e),n={history:!1,tapToClose:!0,galleryUID:e.getAttribute("data-pswp-uid"),getThumbBoundsFn:function(t){var e=a[t].el.getElementsByTagName("img")[0],i=window.pageYOffset||document.documentElement.scrollTop,s=e.getBoundingClientRect();return{x:s.left,y:s.top+i,w:s.width}}},s)if(n.galleryPIDs){for(var o=0;o<a.length;o++)if(a[o].pid==t){n.index=o;break}}else n.index=parseInt(t,10)-1;else n.index=parseInt(t,10);if(isNaN(n.index))return"";i&&(n.showAnimationDuration=0),new u.a(r,f.a,a,n).init()},s=document.querySelectorAll(t),n=0,a=s.length;n<a;n++)s[n].setAttribute("data-pswp-uid",n+1),s[n].onclick=e;var r=function(){var t=window.location.hash.substring(1),e={};if(t.length<5)return e;for(var i=t.split("&"),s=0;s<i.length;s++)if(i[s]){var n=i[s].split("=");n.length<2||(e[n[0]]=n[1])}return e.gid&&(e.gid=parseInt(e.gid,10)),e}();r.pid&&r.gid&&i(r.pid,s[r.gid-1],!0,!0)}},mounted:function(){this.initPhotoSwipeFromDOM(".my-gallery")}}),_={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"imgUploader"}},[i("div",{staticClass:"file-list"},[i("div",{staticClass:"thumbnails my-gallery"},[t._l(t.files,function(e,s){return i("figure",{key:s,staticClass:"thumbnail",attrs:{itemprop:"associatedMedia",itemscope:""}},[i("a",{staticClass:"img-wrapper",attrs:{href:e.src,itemprop:"contentUrl","data-size":"400x400"}},[i("img",{attrs:{src:e.src,itemprop:"thumbnail"}})]),t._v(" "),i("span",{staticClass:"file-remove",on:{click:function(e){t.remove(s,e)}}},[t._v("×")])])}),t._v(" "),this.files.length<9?i("section",{staticClass:"thumbnail"},[i("div",{staticClass:"add"},[i("span",[t._v("+")]),t._v(" "),i("input",{ref:"file",attrs:{type:"file",multiple:"",accept:"image/*"},on:{change:function(e){t.selectImgs()}}})])]):t._e()],2),t._v(" "),t._m(0)])])},staticRenderFns:[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"pswp",attrs:{tabindex:"-1",role:"dialog","aria-hidden":"true"}},[i("div",{staticClass:"pswp__bg"}),t._v(" "),i("div",{staticClass:"pswp__scroll-wrap"},[i("div",{staticClass:"pswp__container"},[i("div",{staticClass:"pswp__item"}),t._v(" "),i("div",{staticClass:"pswp__item"}),t._v(" "),i("div",{staticClass:"pswp__item"})]),t._v(" "),i("div",{staticClass:"pswp__ui pswp__ui--hidden"},[i("div",{staticClass:"pswp__top-bar"},[i("div",{staticClass:"pswp__counter"}),t._v(" "),i("button",{staticClass:"pswp__button pswp__button--close",attrs:{title:"Close (Esc)"}}),t._v(" "),i("div",{staticClass:"pswp__preloader"},[i("div",{staticClass:"pswp__preloader__icn"},[i("div",{staticClass:"pswp__preloader__cut"},[i("div",{staticClass:"pswp__preloader__donut"})])])])]),t._v(" "),i("div",{staticClass:"pswp__share-modal pswp__share-modal--hidden pswp__single-tap"},[i("div",{staticClass:"pswp__share-tooltip"})]),t._v(" "),i("button",{staticClass:"pswp__button pswp__button--arrow--left",attrs:{title:"Previous (arrow left)"}}),t._v(" "),i("button",{staticClass:"pswp__button pswp__button--arrow--right",attrs:{title:"Next (arrow right)"}}),t._v(" "),i("div",{staticClass:"pswp__caption"},[i("div",{staticClass:"pswp__caption__center"})])])])])}]};var v={name:"DynamicCreate",data:function(){return{dynamicContent:"",imgList:[],FilecodeList:[],isSubmit:!1}},methods:{getImageList:function(t){var e=this;this.$nextTick(function(){for(var i=0,s=t.length;i<s;i++)e.imgList.push(t[i].src.split("base64,")[1])})},removeImage:function(t){this.imgList.splice(t,1)},_getFileCode:function(t){var e=this;this.$http.post(this.$profileApi.Shared_UploadImage,t).then(function(t){t.Rstatus&&e.FilecodeList.push(t.Rdata)}).catch(function(t){})},createDynamic:function(t){var e=this;this.isSubmit=!0,this.$http.post(this.$profileApi.Dynamic_CreateDynamic,{Subject:this.dynamicContent,Files:t}).then(function(t){e.isSubmit=!1,t.Rstatus&&e.$router.back()}).catch(function(t){})},send:function(){Object(n.Toast)("提交信息在控制台里～图片地址是压缩后的base64地址"),console.log("内容"+this.dynamicContent),console.log(this.imgList)}},components:{uploader:i("VU/8")(h,_,!1,function(t){i("NRzs")},"data-v-3bb4e230",null).exports}},g={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"dynamic_create"}},[i("mt-field",{attrs:{placeholder:"发表您的动态",type:"textarea",rows:"4"},model:{value:t.dynamicContent,callback:function(e){t.dynamicContent=e},expression:"dynamicContent"}}),t._v(" "),i("uploader",{on:{getFiles:t.getImageList,removeFiles:t.removeImage}}),t._v(" "),i("div",{staticClass:"btn-wrapper"},[i("mt-button",{staticClass:"btn-send",attrs:{size:"large",type:"primary"},on:{click:t.send}},[t._v("发布")])],1)],1)},staticRenderFns:[]};var w=i("VU/8")(v,g,!1,function(t){i("CcWh")},"data-v-540f3746",null).exports;s.default.use(l.a);var C=new l.a({routes:[{path:"/",name:"HelloWorld",component:w}]});i("d8/S");s.default.config.productionTip=!1,s.default.use(a.a),new s.default({el:"#app",router:C,components:{App:o},template:"<App/>"})},NRzs:function(t,e){},OCIE:function(t,e){},"d8/S":function(t,e){},sbcC:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.cffc5b2b6cf5aacbd876.js.map